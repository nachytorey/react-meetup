(this["webpackJsonpreact-meetup"]=this["webpackJsonpreact-meetup"]||[]).push([[0],{67:function(e){e.exports=JSON.parse('[{"id":1,"name":"Buenos Aires, Arg.","lat":-34.6154611,"lon":-58.5733849},{"id":2,"name":"California, EE. UU.","lat":37.757815,"lon":-122.5076407},{"id":3,"name":"El cairo, Egipto","lat":26.8446991,"lon":26.3796329},{"id":4,"name":"Marbella, Francia","lon":-6.9342925}]')},87:function(e,t,n){},88:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a,r=n(5),c=n(0),i=n.n(c),o=n(13),s=n.n(o),l=(n(87),n(88),n(11)),u=n(43),d=n(18),j=n(147),h=n(153),b=n(154),p=n(155),O=n(157),m=n(144),f=n(151),y=n(152),g=n(156),v=n(167),E=(n(65),n(165)),x=n(166),I=function(e){return{REQUEST:"".concat(e),PENDING:"".concat(e,"_PENDING"),SUCCESS:"".concat(e,"_SUCCESS"),ERROR:"".concat(e,"_ERROR")}},T="API_START",C="API_DONE",D="API_ERROR",S=(I("GET_WEATHER_CITY"),I("GET_WEATHER")),_=I("ADD_CURRENT_LOCATION_CITY"),N="FETCH_CITIES",R="ADD_WEATHER",A="DELETE_WEATHER",M="CLEAR_WEATHER",k="CHANGE_THEME",U=("".concat(a="SPLIT_POPUP","_OPENED"),"".concat(a,"_CLOSED"),"BLOCK_UI"),w="UNBLOCK_UI",P="CREATE_TOAST",W="DELETE_TOAST",B=function(e){return{MOUNTED:"".concat(e,"_MOUNTED"),RENDERED:"".concat(e,"_RENDERED"),UMOUNTED:"".concat(e,"_UMOUNTED")}}("WEATHER_CARD_COMPONENT"),H=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:T,payload:{url:e,method:"GET",pending:t,success:n,error:a},meta:{api:r}}},L=function(e){return{type:P,payload:{message:e,timeout:2e3,type:"warning"}}},G=function(){return{type:w}},q=n(67),F=(n(57),function(e){return function(e){return e.weather}(e)}),z=function(e){return function(e){return e.cities}(e).byId},J=function(e){return function(e){return e.location}(e)},K={addWeather:function(e){var t=void 0===e.lat;return console.log("city",e),console.log("abort",t),t?{type:"latitud undefined",payload:null}:H("https://cors-anywhere.herokuapp.com/https://api.openweathermap.org/data/2.5/onecall?lat=".concat(e.lat,"&lon=").concat(e.lon,"&exclude=current,minutely,hourly,alerts&units=metric&appid=de35df86f22d1843233d0c35a0de233b"),[S.PENDING,{type:U}],[S.SUCCESS,G()],[S.ERROR,G(),L("Error al consumir la API de clima")],e)},deleteWeather:function(e){return{type:A,payload:e}},clearWeather:function(){return{type:M}},mounted:function(){return[{type:B.MOUNTED},{type:"FETCH_CITIES",payload:q},H("https://cors-anywhere.herokuapp.com/http://ip-api.com/json/",[_.PENDING],[_.SUCCESS],[_.ERROR,L("Error al consumir la API de location")])]}},V=Object(d.b)((function(e){return{cities:z(e),weather:F(e),location:J(e)}}),K)((function(e){var t=e.mounted,a=e.cities,o=e.weather,s=(e.location,e.addWeather),d=e.deleteWeather,I=e.clearWeather,T=Object(m.a)((function(e){return{formControl:{margin:e.spacing(2),minWidth:200},card:{maxWidth:600},selectEmpty:{marginTop:e.spacing(2)},select:{width:200},grid:{},button:{margin:e.spacing(1)}}}))();Object(c.useEffect)((function(){t()}),[o]);var C=i.a.useState([]),D=Object(u.a)(C,2),S=D[0],_=D[1],N=i.a.useState(""),R=Object(u.a)(N,2),A=R[0],M=R[1],k=n(65);return Object(r.jsxs)(j.a,{children:[Object(r.jsx)(x.a,{multiple:!0,id:"checkboxes-tags",value:S,options:a,disableCloseOnSelect:!0,getOptionLabel:function(e){return e.name},renderOption:function(e,t){var n=t.selected;return Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)(v.a,{style:{marginRight:8},checked:n}),e.name]})},style:{},onChange:function(e,t){return(n=t).length<1?M("Seleccione al menos una ciudad"):n.length>3?M("Solo puede seleccionar hasta 3 ciudades"):M(""),void _(n);var n},renderInput:function(e){return Object(r.jsx)(E.a,Object(l.a)(Object(l.a)({},e),{},{error:!!A,helperText:A,variant:"outlined",label:"Ciudades",placeholder:""}))}}),Object(r.jsx)(f.a,{onClick:function(){A||(I(),S.map((function(e){return s(e)})))},color:"primary",className:T.button,variant:"contained",children:"Ver pronostico"}),Object(r.jsx)(f.a,{color:"primary",onClick:function(){I(),_([]),M("")},variant:"contained",children:"Limpiar"}),Object(r.jsx)(y.a,{container:!0,spacing:2,className:T.grid,children:o.byId.map((function(e){return Object(r.jsx)(y.a,{item:!0,xs:12,sm:4,md:4,xl:4,children:Object(r.jsxs)(h.a,{className:T.card,variant:"outlined",children:[Object(r.jsx)(b.a,{children:Object(r.jsxs)(p.a,{children:[Object(r.jsx)(g.a,{gutterBottom:!0,variant:"h5",component:"h2",children:null===e||void 0===e?void 0:e.name}),Object(r.jsx)(g.a,{variant:"subtitle2",children:"Temperatura de los pr\xf3ximos 5 d\xedas"}),Object(r.jsx)(g.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(r.jsxs)(y.a,{container:!0,spacing:1,className:T.grid,children:[Object(r.jsxs)(y.a,{item:!0,xs:4,sm:4,md:4,xl:4,children:[Object(r.jsx)(g.a,{variant:"h6",color:"secondary",align:"center",children:k().format("DD MMM")}),Object(r.jsx)(g.a,{variant:"subtitle2",align:"center",children:Math.trunc(null===e||void 0===e?void 0:e.daily[0].temp.day)+"\xb0"})]}),Object(r.jsxs)(y.a,{item:!0,xs:4,sm:4,md:4,xl:4,children:[Object(r.jsx)(g.a,{variant:"h6",color:"secondary",align:"center",children:k().add(1,"day").format("DD MMM")}),Object(r.jsx)(g.a,{variant:"subtitle2",align:"center",children:Math.trunc(null===e||void 0===e?void 0:e.daily[1].temp.day)+"\xb0"})]}),Object(r.jsxs)(y.a,{item:!0,xs:4,sm:4,md:4,xl:4,children:[Object(r.jsx)(g.a,{variant:"h6",color:"secondary",align:"center",children:k().add(2,"day").format("DD MMM")}),Object(r.jsx)(g.a,{variant:"subtitle2",align:"center",children:Math.trunc(null===e||void 0===e?void 0:e.daily[2].temp.day)+"\xb0"})]}),Object(r.jsxs)(y.a,{item:!0,xs:4,sm:4,md:4,xl:4,children:[Object(r.jsx)(g.a,{variant:"h6",color:"secondary",align:"center",children:k().add(3,"day").format("DD MMM")}),Object(r.jsx)(g.a,{variant:"subtitle2",align:"center",children:Math.trunc(null===e||void 0===e?void 0:e.daily[3].temp.day)+"\xb0"})]}),Object(r.jsxs)(y.a,{item:!0,xs:4,sm:4,md:4,xl:4,children:[Object(r.jsx)(g.a,{variant:"h6",color:"secondary",align:"center",children:k().add(4,"day").format("DD MMM")}),Object(r.jsx)(g.a,{variant:"subtitle2",align:"center",children:Math.trunc(null===e||void 0===e?void 0:e.daily[4].temp.day)+"\xb0"})]})]})})]})}),Object(r.jsx)(O.a,{children:Object(r.jsx)(f.a,{size:"small",color:"primary",onClick:function(){return function(e){d(e)}(e)},children:"Eliminar"})})]},null===e||void 0===e?void 0:e.cityId)},null===e||void 0===e?void 0:e.cityId)}))})]})})),X=n(160),Y=n(161),Q=n(158),Z=n(159),$=function(e){return e.ui},ee=function(e){return $(e).requests>0},te=function(e){return $(e).theme},ne=function(e){return $(e).blocking>0},ae="light",re="dark",ce={changeTheme:function(e){return{type:k,payload:{theme:e}}}},ie=Object(d.b)((function(e){return{theme:te(e)}}),ce)((function(e){var t=e.theme,n=e.changeTheme;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(Q.a,{children:Object(r.jsx)(Z.a,{color:"secondary",checked:t===re,onChange:function(e){var t=e.target.checked?re:ae;n(t)}})})})})),oe=Object(m.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2),marginBottom:e.spacing(2)}}})),se=Object(d.b)((function(e){return{spinner:ee(e)}}),null)((function(e){e.spinner;var t=oe();return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(X.a,{position:"static",className:t.menuButton,children:Object(r.jsxs)(Y.a,{children:[Object(r.jsx)(g.a,{variant:"h6",children:"Challenge"}),Object(r.jsx)(ie,{})]})})})})),le=n(169),ue=n(162),de=Object(m.a)((function(e){return{backdrop:{zIndex:999999,color:"#fff"}}})),je=function(e){var t=e.isBlocked,n=de();return Object(r.jsx)(le.a,{className:n.backdrop,open:t,children:Object(r.jsx)(ue.a,{color:"inherit"})})},he=Object(m.a)((function(e){return{root:{padding:e.spacing(2),margin:e.spacing(3)}}})),be=function(e){var t=e.children,n=he();return Object(r.jsx)("div",{className:n.root,children:t})},pe=Object(d.b)((function(e){return{isBlocked:ne(e)}}))((function(e){var t=e.isBlocked;return Object(r.jsxs)("div",{children:[Object(r.jsx)(se,{}),Object(r.jsxs)(be,{children:[Object(r.jsx)("h1",{children:"Oh!"}),Object(r.jsx)(V,{}),Object(r.jsx)(je,{isBlocked:t})]})]})})),Oe=n(54),me=n(26),fe={byId:[],isFetching:!1},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:var n=t.payload;return Object(l.a)(Object(l.a)({},e),{},{byId:n,isFetching:!0});default:return e}},ge={requests:0,blocking:0,theme:ae},ve=0,Ee={messages:[]},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case P:return{messages:[].concat(Object(Oe.a)(e.messages),[Object(l.a)({id:ve++},t.payload)])};case W:var n=t.payload;return{messages:e.messages.filter((function(e){return e.id!==n}))};default:return e}},Ie={byId:[]},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.SUCCESS:var n=t.payload;n.lastUpdatedTime=Date.now(),n.cityId=t.meta.id,n.name=t.meta.name;var a=e.byId,r=e.byId.findIndex((function(e){return e.cityId===n.cityId}));return-1===r?a.push(n):a[r]=n,Object(l.a)(Object(l.a)({},e),{},{byId:a});case R:var c={lastUpdatedTime:Date.now(),cityId:t.payload.id,name:t.payload.name},i=e.byId,o=e.byId.findIndex((function(e){return e.cityId===c.cityId}));return-1===o?i.push(c):i[o]=c,Object(l.a)(Object(l.a)({},e),{},{byId:i});case A:var s=t.payload.cityId,u=e.byId.filter((function(e){return e.cityId!=s}));return Object(l.a)(Object(l.a)({},e),{},{byId:u});case M:return Object(l.a)(Object(l.a)({},e),{},{byId:[]});default:return e}},Ce={},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.SUCCESS:return t.payload;default:return e}},Se=Object(me.c)({cities:ye,weather:Te,ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(l.a)(Object(l.a)({},e),{},{requests:e.requests-1});case T:return Object(l.a)(Object(l.a)({},e),{},{requests:e.requests+1});case D:return Object(l.a)(Object(l.a)({},e),{},{requests:e.requests-1});case k:var n=t.payload.theme;return Object(l.a)(Object(l.a)({},e),{},{theme:n});case U:return Object(l.a)(Object(l.a)({},e),{},{blocking:e.blocking+1});case w:return Object(l.a)(Object(l.a)({},e),{},{blocking:e.blocking-1});default:return e}},toast:xe,location:De}),_e=[function(){return function(e){return function(t){try{e(t)}catch(n){console.log(n)}}}},function(e){var t=e.dispatch;return function(e){return function(n){Array.isArray(n)?n.forEach((function(e){"function"===typeof e?t(e()):(null===e||void 0===e?void 0:e.type)&&t(e)})):e(n)}}},function(e){var t=e.dispatch;return function(e){return function(n){if(e(n),n.type===T){var a=n.payload,r=a.url,c=a.method,i=a.data,o=a.success,s=a.pending,u=a.error,d=n.meta.api||{};if(s){var j=[];(Array.isArray(s)?s:[s]).forEach((function(e){"string"===typeof e?j.push({type:e}):j.push(e)})),t(j)}var h={method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)};fetch(r,h).then((function(e){return e.json()})).then((function(e){var n=[{type:C,meta:{url:r}}];(Array.isArray(o)?o:[o]).forEach((function(t){"string"===typeof t?n.push({type:t,payload:e,meta:Object(l.a)(Object(l.a)({},d),{},{time:Date.now()})}):n.push(t)})),t(n)})).catch((function(e){var n=[{type:D,payload:JSON.stringify(e)}];(Array.isArray(u)?u:[u]).forEach((function(e){"string"===typeof e?n.push({type:e}):"object"===typeof e&&n.push(e)})),t(n)}))}}}}],Ne=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||me.d,Re=Object(me.e)(Se,Ne(me.a.apply(void 0,Object(Oe.a)(_e)))),Ae=n(163),Me=n(73),ke=n(72),Ue=n.n(ke),we=function(e){return Object(Me.a)({palette:{primary:Ue.a,type:e},overrides:{MuiCssBaseline:{"@global":{p:{color:"black"},".capitalize":{textTransform:"capitalize"}}}}})},Pe=n(168),We=function(e){return e.toast},Be=function(e){var t,n,a=void 0==(null===(t=We(e))||void 0===t?void 0:t.messages)?[]:null===(n=We(e))||void 0===n?void 0:n.messages;return a.length?a[0]:null},He={deleteToast:function(e){return{type:W,payload:e}}},Le=Object(d.b)((function(e){return{message:Be(e)}}),He)((function(e){var t=e.message,n=e.deleteToast,a=Object(c.useState)(!0),i=Object(u.a)(a,2),o=i[0],s=i[1];return Object(c.useEffect)((function(){s(!0)}),[t]),t&&Object(r.jsx)(Pe.a,{message:t.message,open:o,onClose:function(){s(!1)},anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:t.timeout,onExited:function(){return n(t.id)}},t.id)})),Ge=n(164),qe=Object(d.b)((function(e){return{theme:te(e)}}))((function(e){var t=e.theme,n=we(t);return Object(r.jsxs)(Ae.a,{theme:n,children:[Object(r.jsx)(Ge.a,{}),Object(r.jsx)(pe,{}),Object(r.jsx)(Le,{})]})}));s.a.render(Object(r.jsx)(d.a,{store:Re,children:Object(r.jsx)(qe,{})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.6bd8731d.chunk.js.map